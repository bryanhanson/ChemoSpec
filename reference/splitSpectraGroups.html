<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create New Groups from an Existing Spectra Object — splitSpectraGroups • ChemoSpec</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Create New Groups from an Existing Spectra Object — splitSpectraGroups" />
<meta property="og:description" content="This function takes an existing Spectra object and uses your
instructions to split the existing spectra$groups into new groups.
The new groups are added to the existing Spectra object (a
list) as new elements.  This allows one to use different combinations of
factors than were originally encoded in the Spectra object.
The option also exists to replace the color scheme with one which
corresponds to the new factors." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ChemoSpec</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">5.3.21</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ChemoSpec.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/bryanhanson/ChemoSpec/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create New Groups from an Existing Spectra Object</h1>
    <small class="dont-index">Source: <a href='https://github.com/bryanhanson/ChemoSpec/blob/master/R/splitSpectraGroups.R'><code>R/splitSpectraGroups.R</code></a></small>
    <div class="hidden name"><code>splitSpectraGroups.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function takes an existing <code><a href='Spectra.html'>Spectra</a></code> object and uses your
instructions to split the existing <code>spectra$groups</code> into new groups.
The new groups are added to the existing <code><a href='Spectra.html'>Spectra</a></code> object (a
list) as new elements.  This allows one to use different combinations of
factors than were originally encoded in the <code><a href='Spectra.html'>Spectra</a></code> object.
The option also exists to replace the color scheme with one which
corresponds to the new factors.</p>
    </div>

    <pre class="usage"><span class='fu'>splitSpectraGroups</span><span class='op'>(</span><span class='va'>spectra</span>, inst <span class='op'>=</span> <span class='cn'>NULL</span>, rep.cols <span class='op'>=</span> <span class='cn'>NULL</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>spectra</th>
      <td><p>An object of S3 class <code><a href='Spectra.html'>Spectra</a></code>.</p></td>
    </tr>
    <tr>
      <th>inst</th>
      <td><p>A list giving the name of the new element to be created from a
set of target strings given in a character vector.  See the example for the
syntax.</p></td>
    </tr>
    <tr>
      <th>rep.cols</th>
      <td><p>Optional.  A vector giving new colors which correspond to
the levels of <code>inst</code>.  Only possible if <code>inst</code> has only one
element, as the possible combinations of levels and colors may get
complicated.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments to be passed downstream. Currently not
used.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of S3 class <code><a href='Spectra.html'>Spectra</a></code>, modified to have
additional elements as specified by <code>inst</code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The items in the character vector are grepped among the existing
<code>spectra$groups</code> entries; when found, they are placed in a new element
of <code><a href='Spectra.html'>Spectra</a></code>.  In the example, all <code>spectra$groups</code> entries
containing "G" are coded as "G" in a new element called <code>spectra$env</code>,
and any entries containing "T" are handled likewise.  This amounts to a sort
of recoding of factors (the example demonstrates this).  Every entry in
<code>spectra$groups</code> should be matched by one of the entries in the
character vector.  If not, you will get &lt;NA&gt; entries.  Also, if the targets
in the character vector are not unique, your results will reflect the order
of the levels.  Since this is a grep process, you can pass any valid grep
string as the target.</p>
<p>If <code>rep.cols</code> is provided, these colors are mapped one for one onto the
levels of the the first element of <code>inst</code>.  This provides a different
means of changing the sample color encoding than <code>conColScheme</code>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code>conColScheme</code>
Additional documentation at <a href='https://bryanhanson.github.io/ChemoSpec/'>https://bryanhanson.github.io/ChemoSpec/</a></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Bryan A. Hanson, DePauw University.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='va'>metMUD2</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>metMUD2</span><span class='op'>$</span><span class='va'>groups</span><span class='op'>)</span> <span class='co'># original factor encoding</span>
</div><div class='output co'>#&gt; [1] "AbcD" "AbCD" "ABcD" "ABCD"</div><div class='input'>
<span class='co'># Split those original levels into 2 new ones (re-code them)</span>
<span class='va'>new.grps</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>geneBb <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"B"</span>, <span class='st'>"b"</span><span class='op'>)</span>, geneCc <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"C"</span>, <span class='st'>"c"</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'>splitSpectraGroups</span><span class='op'>(</span><span class='va'>metMUD2</span>, <span class='va'>new.grps</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>	Additional data was found: geneBb</span></div><div class='output co'>#&gt; <span class='message'>	Additional data was found: geneCc</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>res</span><span class='op'>)</span> <span class='co'># note two new elements, "geneBb" and "geneCc"</span>
</div><div class='output co'>#&gt; List of 11
#&gt;  $ freq   : num [1:1500] 5 5 4.99 4.99 4.99 ...
#&gt;  $ data   : num [1:20, 1:1500] 0.204 0.208 0.206 0.214 0.219 ...
#&gt;   ..- attr(*, "dimnames")=List of 2
#&gt;   .. ..$ : NULL
#&gt;   .. ..$ : NULL
#&gt;  $ names  : chr [1:20] "sample_1" "sample_2" "sample_3" "sample_4" ...
#&gt;  $ groups : Factor w/ 4 levels "AbcD","AbCD",..: 4 4 4 4 4 3 3 3 3 3 ...
#&gt;  $ colors : chr [1:20] "black" "black" "black" "black" ...
#&gt;  $ sym    : num [1:20] 0 0 0 0 0 1 1 1 1 1 ...
#&gt;  $ alt.sym: chr [1:20] "w" "w" "w" "w" ...
#&gt;  $ unit   : chr [1:2] "ppm" "intensity"
#&gt;  $ desc   : chr "metMUD2: 4 groups; 4 metabolites: 2 +correlated, 2 -correlated, 1 random"
#&gt;  $ geneBb : Factor w/ 2 levels "b","B": 2 2 2 2 2 2 2 2 2 2 ...
#&gt;  $ geneCc : Factor w/ 2 levels "c","C": 2 2 2 2 2 1 1 1 1 1 ...
#&gt;  - attr(*, "class")= chr "Spectra"</div><div class='input'><span class='fu'><a href='sumSpectra.html'>sumSpectra</a></span><span class='op'>(</span><span class='va'>res</span><span class='op'>)</span> <span class='co'># reports on extra elements</span>
</div><div class='output co'>#&gt; <span class='message'>	Additional data was found: geneBb</span></div><div class='output co'>#&gt; <span class='message'>	Additional data was found: geneCc</span></div><div class='output co'>#&gt; <span class='message'>	Additional data was found: geneBb</span></div><div class='output co'>#&gt; <span class='message'>	Additional data was found: geneCc</span></div><div class='output co'>#&gt; 
#&gt;  metMUD2: 4 groups; 4 metabolites: 2 +correlated, 2 -correlated, 1 random 
#&gt; 
#&gt; 	There are 20 spectra in this set.
#&gt; 	The y-axis unit is intensity.
#&gt; 
#&gt; 	The frequency scale runs from
#&gt; 	5 to 0 ppm
#&gt; 	There are 1500 frequency values.
#&gt; 	The frequency resolution is
#&gt; 	0.003335557 ppm/point.
#&gt; 
#&gt; 
#&gt; 	The spectra are divided into 4 groups: 
#&gt; 
#&gt;   group no. color symbol alt.sym
#&gt; 1  AbcD   5  blue      3       z
#&gt; 2  AbCD   5 green      2       y
#&gt; 3  ABcD   5   red      1       x
#&gt; 4  ABCD   5 black      0       w
#&gt; </div><div class='output co'>#&gt; <span class='message'>	Additional data was found: geneBb</span></div><div class='output co'>#&gt; <span class='message'>	Additional data was found: geneCc</span></div><div class='output co'>#&gt; 
#&gt; *** Note: this is an S3 object
#&gt; of class 'Spectra'</div><div class='input'>
<span class='co'># Note that if you want to use a newly created group in</span>
<span class='co'># plotScores and other functions to drive the color scheme</span>
<span class='co'># and labeling, you'll have to update the groups element:</span>
<span class='va'>res</span><span class='op'>$</span><span class='va'>groups</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>as.factor</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste</a></span><span class='op'>(</span><span class='va'>res</span><span class='op'>$</span><span class='va'>geneBb</span>, <span class='va'>res</span><span class='op'>$</span><span class='va'>geneCc</span>, sep <span class='op'>=</span> <span class='st'>""</span><span class='op'>)</span><span class='op'>)</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Bryan A. Hanson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>



<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Import Data into a Spectra Object — files2SpectraObject • ChemoSpec</title>

<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico">

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.1/clipboard.min.js" integrity="sha256-hIvIxeqhGZF+VVeM55k0mJvWpQ6gTkWk3Emc+NmowYA=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Import Data into a Spectra Object — files2SpectraObject" />

<meta property="og:description" content="These functions import data into a Spectra object.  They use
read.table to read files so they are
very flexible in regard to file formatting.  Be sure to see the &amp;#8230;
argument below for important details you need to provide." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ChemoSpec</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">5.0.96</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/ChemoSpec.pdf">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/bryanhanson/ChemoSpec">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Import Data into a Spectra Object</h1>
    <small class="dont-index">Source: <a href='https://github.com/bryanhanson/ChemoSpec/blob/master/R/files2SpectraObject.R'><code>R/files2SpectraObject.R</code></a>, <a href='https://github.com/bryanhanson/ChemoSpec/blob/master/R/matrix2SpectraObject.R'><code>R/matrix2SpectraObject.R</code></a></small>
    <div class="hidden name"><code>files2SpectraObject.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>These functions import data into a <code><a href='Spectra.html'>Spectra</a></code> object.  They use
<code><a href='http://www.rdocumentation.org/packages/utils/topics/read.table'>read.table</a></code> to read files so they are
very flexible in regard to file formatting.  <span class="pkg">Be sure to see the &#8230;
argument below for important details you need to provide.</span></p>
    
    </div>

    <pre class="usage"><span class='fu'>files2SpectraObject</span>(<span class='kw'>gr.crit</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>gr.cols</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"auto"</span>),
  <span class='kw'>freq.unit</span> <span class='kw'>=</span> <span class='st'>"no frequency unit provided"</span>,
  <span class='kw'>int.unit</span> <span class='kw'>=</span> <span class='st'>"no intensity unit provided"</span>,
  <span class='kw'>descrip</span> <span class='kw'>=</span> <span class='st'>"no description provided"</span>, <span class='kw'>fileExt</span> <span class='kw'>=</span> <span class='st'>"\\.(csv|CSV)$"</span>,
  <span class='kw'>out.file</span> <span class='kw'>=</span> <span class='st'>"mydata"</span>, <span class='kw'>debug</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)

<span class='fu'>matrix2SpectraObject</span>(<span class='kw'>gr.crit</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>gr.cols</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='st'>"auto"</span>),
  <span class='kw'>freq.unit</span> <span class='kw'>=</span> <span class='st'>"no frequency unit provided"</span>,
  <span class='kw'>int.unit</span> <span class='kw'>=</span> <span class='st'>"no intensity unit provided"</span>,
  <span class='kw'>descrip</span> <span class='kw'>=</span> <span class='st'>"no description provided"</span>, <span class='kw'>in.file</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>out.file</span> <span class='kw'>=</span> <span class='st'>"mydata"</span>, <span class='kw'>chk</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>gr.crit</th>
      <td><p>Group Criteria.  A vector of character strings which will be
searched for among the file/sample names in order to assign an individual
spectrum to group membership. This is done using grep, so characters
like "." (period/dot) do not have their literal meaning (see below).
Warnings are issued if there are file/sample
names that don't match entries in <code>gr.crit</code> or there are entries in
<code>gr.crit</code> that don't match any file names.  A maximum of 8 groups
can automatically be assigned colors and symbols.  If you have more than 8
groups, you will need to provide a vector of colors (see below) and 
manually fix the symbols after the <code>Spectra</code> object is created.</p></td>
    </tr>
    <tr>
      <th>gr.cols</th>
      <td><p>Group Colors.  Either the word "auto", in which case colors
will be automatically assigned, or a vector of acceptable color names with
the same length as <code>gr.crit</code>. In the latter case, colors will be
assigned one for one, so the first element of <code>gr.crit</code> is assigned the
first element of <code>gr.col</code> and so forth. A maximum of 8 colors can be
assigned automatically, after that, you must give a vector of colors.
See details below for some other issues to consider.</p></td>
    </tr>
    <tr>
      <th>freq.unit</th>
      <td><p>A character string giving the units of the x-axis
(frequency or wavelength).</p></td>
    </tr>
    <tr>
      <th>int.unit</th>
      <td><p>A character string giving the units of the y-axis (some sort
of intensity).</p></td>
    </tr>
    <tr>
      <th>descrip</th>
      <td><p>A character string describing the data set that will be
stored.  This string is used in some plots so it is recommended that its
length be less than about 40 characters.</p></td>
    </tr>
    <tr>
      <th>fileExt</th>
      <td><p>A character string giving the extension of the files to be
processed. <code>regex</code> strings can be used.  For instance, the default
finds files with either <code>".csv"</code> or <code>".CSV"</code> as the extension.
Matching is done via a grep process, which is greedy.</p></td>
    </tr>
    <tr>
      <th>out.file</th>
      <td><p>A file name.  The
completed object of S3 class <code><a href='Spectra.html'>Spectra</a></code> will be written to this
file.</p></td>
    </tr>
    <tr>
      <th>debug</th>
      <td><p>Logical. Applies to <code>files2SpectraObject</code> only.
Set to <code>TRUE</code> for troubleshooting when an error
is thrown during import.  In addition, values of 1-5 will work
when importing a JCAMP-DX file via <code>fileExt = ".jdx"</code> etc.  These
will be passed through to the <code><a href='http://www.rdocumentation.org/packages/readJDX/topics/readJDX'>readJDX</a></code> function.
See there for much more info on importing JCAMP-DX files.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments to be passed to <code><a href='http://www.rdocumentation.org/packages/utils/topics/read.table'>read.table</a></code>.  <span class="pkg">You
MUST supply values for <code>sep</code>, <code>dec</code> and <code>header</code> consistent
with your file structure, unless they are the same as the defaults for
<code><a href='http://www.rdocumentation.org/packages/utils/topics/read.table'>read.table</a></code></span>.</p></td>
    </tr>
    <tr>
      <th>in.file</th>
      <td><p>Character.  Applies to <code>matrix2SpectraObject</code> only.
Input file name, including extension.</p></td>
    </tr>
    <tr>
      <th>chk</th>
      <td><p>Logical. Applies to <code>matrix2SpectraObject</code> only.
Should the <code>Spectra</code> object be checked for
integrity?  If you are having trouble importing your data, set this to
<code>FALSE</code> and do <code>str(your object)</code> to troubleshoot.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A object of class <code><a href='Spectra.html'>Spectra</a></code>.  An <em>unnamed</em> object
of S3 class <code><a href='Spectra.html'>Spectra</a></code> is also written to <code>out.file</code>.  To
read it back into the workspace, use <code>new.name &lt;- loadObject(out.file)</code>
(<code>loadObject</code> is package <span class="pkg">R.utils</span>).</p>
    
    <h2 class="hasAnchor" id="functions"><a class="anchor" href="#functions"></a>Functions</h2>

    <ul>
<li><p><code>files2SpectraObject</code>: Import data from separate csv files</p></li>
<li><p><code>matrix2SpectraObject</code>: Import a matrix of data</p></li>
</ul>
    
    <h2 class="hasAnchor" id="files-spectraobject"><a class="anchor" href="#files-spectraobject"></a>files2SpectraObject</h2>

    
    <p><code>files2SpectraObject</code> acts on all files in the current working
directory with the specified <code>fileExt</code> so there should be no
extra files of that type hanging around (except see next paragraph).
The first column should
contain the frequency values and the second column the intensity values. The
files may have a header or not (supply <code>header = TRUE/FALSE</code> as
necessary).  The frequency column is assumed to be the same in all files.</p>
<p>If <code>fileExt</code> contains any of <code>"dx"</code>, <code>"DX"</code>, <code>"jdx"</code> or
<code>"JDX"</code>, then the files will be processed by <code><a href='http://www.rdocumentation.org/packages/readJDX/topics/readJDX'>readJDX</a></code>.
Consider setting <code>debug = TRUE</code> for this format, as there are many
options for JCAMP, and many are untested. See <code><a href='http://www.rdocumentation.org/packages/readJDX/topics/readJDX'>readJDX</a></code> for
known limitations.</p>
    
    <h2 class="hasAnchor" id="matrix-spectraobject"><a class="anchor" href="#matrix-spectraobject"></a>matrix2SpectraObject</h2>

    
    <p>This function takes a csv-like file, containing frequencies in the first
column, and samples in additional columns, and processes it into a
<code><a href='Spectra.html'>Spectra</a></code> object.  The file MUST have a header row which includes
the sample names.  There need not be a header for the first (frequency)
column.</p>
    
    <h2 class="hasAnchor" id="gr-crit-and-sample-name-gotchas"><a class="anchor" href="#gr-crit-and-sample-name-gotchas"></a>gr.crit and Sample Name Gotchas</h2>

    
    <p>The matching of <code>gr.crit</code> against the sample file names
(in <code>files2SpectraObject</code>) or column headers/sample names
(in codematrix2SpectraObject) is done one at
a time, in order, using grep.  While powerful, this has the potential to lead
to some "gotchas" in certain cases, noted below.</p>
<p>Your file system may allow file/sample names which <code>R</code> will not like, and will
cause confusing behavior.  File/sample names become variables in <code>ChemoSpec</code>,
and <code>R</code>
does not like things like "-" (minus sign or hyphen) in file/sample names.  A hyphen
is converted to a period (".") if found, which is fine for a variable name.
However, a period in <code>gr.crit</code> is interpreted from the grep point of view,
namely a period matches any single character.  At this point, things may behave
very differently than one might hope.  See <code>make.names</code> for allowed
characters in <code>R</code> variables and make sure your file/sample names comply.</p>
<p>The entries in <code>gr.crit</code> must be
mutually exclusive.  For example, if you have files with names like
"Control_1" and "Sample_1" and use <code>gr.crit = c("Control", "Sample")</code>
groups will be assigned as you would expect.  But, if you have file names
like "Control_1_Shade" and "Sample_1_Sun" you can't use <code>gr.crit =
c("Control",</code> <code>"Sample"</code>, <code>"Sun"</code>, <code>"Shade")</code> because each criteria is grepped in
order, and the "Sun/Shade" phrases, being last, will form the basis for your
groups.  Because this is a grep process, you can get around this by using
regular expressions in your <code>gr.crit</code> argument to specify the desired
groups in a mutually exclusive manner.  In this second example, you could
use <code>gr.crit = c("Control(.*)Sun"</code>, <code>"Control(.*)Shade"</code>, <code>"Sample(.*)Sun"</code>,
<code>"Sample(.*)Shade")</code> to have your groups assigned based upon both phrases in
the file names.</p>
<p>To summarize, <code>gr.crit</code> is used as a grep pattern, and the file/sample names
are the target.  Make sure your file/sample names comply with <code>make.names</code>.</p>
<p>Finally, samples whose names are not matched using <code>gr.crit</code> are still
incorporated into the <code><a href='Spectra.html'>Spectra</a></code> object, but they are not
assigned a group or color. Therefore they don't plot, but they do take up space in a
plot!  A warning is issued in these cases, since one wouldn't normally want
a spectrum to be orphaned this way.</p>
<p>All these problems can generally be identified by running <code><a href='sumSpectra.html'>sumSpectra</a></code>
once the data is imported.</p>
    
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p><a href='https://github.com/bryanhanson/ChemoSpec'>https://github.com/bryanhanson/ChemoSpec</a></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># Grab an included file</span>
<span class='no'>ed</span> <span class='kw'>&lt;-</span> <span class='fu'>system.file</span>(<span class='st'>"extdata"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"ChemoSpec"</span>)
<span class='no'>tf</span> <span class='kw'>&lt;-</span> <span class='st'>"PCRF.jdx"</span>
<span class='no'>chk</span> <span class='kw'>&lt;-</span> <span class='fu'>file.copy</span>(<span class='kw'>from</span> <span class='kw'>=</span> <span class='fu'>file.path</span>(<span class='no'>ed</span>, <span class='no'>tf</span>), <span class='kw'>to</span> <span class='kw'>=</span> <span class='fu'>file.path</span>(<span class='fu'>getwd</span>(), <span class='no'>tf</span>),
        <span class='kw'>overwrite</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)

<span class='co'># Now read in the file, and plot</span>
<span class='no'>spec</span> <span class='kw'>&lt;-</span> <span class='fu'>files2SpectraObject</span>(<span class='kw'>gr.crit</span> <span class='kw'>=</span> <span class='st'>"PCRF"</span>, <span class='kw'>freq.unit</span> <span class='kw'>=</span> <span class='st'>"ppm"</span>, <span class='kw'>int.unit</span> <span class='kw'>=</span> <span class='st'>"intensity"</span>,
  <span class='kw'>descrip</span> <span class='kw'>=</span> <span class='st'>"test import"</span>, <span class='kw'>fileExt</span> <span class='kw'>=</span> <span class='st'>"\\.jdx"</span>)
<span class='fu'><a href='sumSpectra.html'>sumSpectra</a></span>(<span class='no'>spec</span>)</div><div class='output co'>#&gt; 
#&gt;  test import 
#&gt; 
#&gt; 	There are 1 spectra in this set.
#&gt; 	The y-axis unit is intensity.
#&gt; 
#&gt; 	The frequency scale runs from
#&gt; 	6.189331 to -0.8256219 ppm
#&gt; 	There are 7014 frequency values.
#&gt; 	The frequency resolution is
#&gt; 	0.001000278 ppm/point.
#&gt; 
#&gt; 	This data set is not continuous
#&gt; 	along the frequency axis.
#&gt; 	Here are the data chunks:
#&gt; 
#&gt;   beg.freq   end.freq      size beg.indx end.indx
#&gt; 1 6.189331 -0.8256219 -7.014953        1     7014
#&gt; 
#&gt; 	The spectra are divided into 1 groups: 
#&gt; 
#&gt;   group no.   color symbol alt.sym
#&gt; 1  PCRF   1 #E41A1C      0       a
#&gt; 
#&gt; 
#&gt; *** Note: this data is an S3 object of class 'Spectra2D'</div><div class='input'><span class='fu'><a href='plotSpectra.html'>plotSpectra</a></span>(<span class='no'>spec</span>, <span class='kw'>lab.pos</span> <span class='kw'>=</span> <span class='fl'>3.5</span>, <span class='kw'>main</span> <span class='kw'>=</span> <span class='st'>"Reduced Fat Potato Chip"</span>)</div><div class='img'><img src='files2SpectraObject-1.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#functions">Functions</a></li>

      <li><a href="#files-spectraobject">files2SpectraObject</a></li>

      <li><a href="#matrix-spectraobject">matrix2SpectraObject</a></li>

      <li><a href="#gr-crit-and-sample-name-gotchas">gr.crit and Sample Name Gotchas</a></li>

      <li><a href="#references">References</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    
Bryan A. Hanson, DePauw University.

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Bryan A. Hanson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

